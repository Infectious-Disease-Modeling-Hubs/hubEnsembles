[{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 Consortium Infectious Disease Modeling Hubs Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Anna Krystalli. Author, maintainer. Evan L Ray. Author. Li Shandross. Author.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Krystalli , Ray E, Shandross L (2023). hubEnsembles: Ensemble methods combining hub model outputs.. https://github.com/Infectious-Disease-Modeling-Hubs/hubEnsembles, https://infectious-disease-modeling-hubs.github.io/hubEnsembles/.","code":"@Manual{,   title = {hubEnsembles: Ensemble methods for combining hub model outputs.},   author = {Anna Krystalli and Evan L Ray and Li Shandross},   year = {2023},   note = {https://github.com/Infectious-Disease-Modeling-Hubs/hubEnsembles, https://infectious-disease-modeling-hubs.github.io/hubEnsembles/}, }"},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/index.html","id":"hubensembles","dir":"","previous_headings":"","what":"Ensemble methods for combining hub model outputs.","title":"Ensemble methods for combining hub model outputs.","text":"goal hubEnsembles provide standard implementations commonly used methods ensembling model outputs. hubEnsembles package part hubverse project expects input data key functions formatted object model_out_tbl class.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Ensemble methods for combining hub model outputs.","text":"can install development version hubEnsembles using code:","code":"remotes::install_github(\"infectious-disease-modeling-hubs/hubEnsembles\")"},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/linear_pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","title":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","text":"Compute ensemble model outputs linear pool, otherwise known distributional mixture, component model outputs combination model task, output type, output type id. Supported output types include mean, quantile, cdf, pmf.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/linear_pool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","text":"","code":"linear_pool(   model_outputs,   weights = NULL,   weights_col_name = \"weight\",   model_id = \"hub-ensemble\",   task_id_cols = NULL,   n_samples = 10000,   ... )"},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/linear_pool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","text":"model_outputs object class model_output_df component model outputs (e.g., predictions). weights optional data.frame component model weights. provided, column named model_id column containing model weights. Optionally, may contain additional columns corresponding task id variables, output_type, output_type_id, weights specific values variables. default NULL, case equally-weighted ensemble calculated. weights_col_name character string naming column weights model weights. Defaults \"weight\" model_id character string identifier use ensemble model. task_id_cols character vector names columns model_outputs specify modeling tasks. Defaults NULL, case columns model_outputs \"model_id\", specified output_type_col output_type_id_col, \"value\" used task ids. n_samples numeric specifies number samples use calculating quantiles estimated quantile function. Defaults 1e4. ... parameters passed distfromq::make_q_fn, specifying details estimate quantile function provided quantile levels quantile values output_type \"quantile\".","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/linear_pool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","text":"model_out_tbl object ensemble predictions. Note additional columns input model_outputs dropped.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/linear_pool.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","text":"underlying mechanism computations varies different output_types. output_type cdf, pmf, mean, function simply calls simple_ensemble calculate (weighted) mean component model outputs. definitional calculation cdf pmf linear pool. mean output type, justified fact (weighted) mean linear pool (weighted) mean means component distributions. output_type quantile, obtain quantiles linear pool three steps: 1. Interpolate extrapolate provided quantiles component model obtain estimate cdf distribution. 2. Draw samples distribution component model. reduce Monte Carlo variability, use pseudo-random samples corresponding quantiles estimated distribution. 3. Collect samples component models extract desired quantiles. Steps 1 2 process performed distfromq::make_q_fn.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/linear_pool.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute ensemble model outputs as a linear pool, otherwise known as a\ndistributional mixture, of component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, quantile, cdf, and pmf. — linear_pool","text":"","code":"# We illustrate the calculation of a linear pool when we have quantiles from the # component models. We take the components to be normal distributions with # means -3, 0, and 3, all standard deviations 1, and weights 0.25, 0.5, and 0.25. library(purrr) component_ids <- letters[1:3] component_weights <- c(0.25, 0.5, 0.25) component_means <- c(-3, 0, 3)  lp_qs <- seq(from = -5, to = 5, by = 0.25) # linear pool quantiles, expected outputs ps <- rep(0, length(lp_qs)) for (m in seq_len(3)) {   ps <- ps + component_weights[m] * pnorm(lp_qs, mean = component_means[m]) }  component_qs <- purrr::map(component_means, ~ qnorm(ps, mean=.x)) %>% unlist() component_outputs <- data.frame(   stringsAsFactors = FALSE,   model_id = rep(component_ids, each = length(lp_qs)),   target = \"inc death\",   output_type = \"quantile\",   output_type_id = ps,   value = component_qs)  lp_from_component_qs <- linear_pool(   component_outputs,   weights = data.frame(model_id = component_ids, weight = component_weights))  head(lp_from_component_qs) #> # A tibble: 6 × 5 #>   model_id     target    output_type output_type_id value #>   <chr>        <chr>     <chr>                <dbl> <dbl> #> 1 hub-ensemble inc death quantile           0.00569 -5.00 #> 2 hub-ensemble inc death quantile           0.0100  -4.75 #> 3 hub-ensemble inc death quantile           0.0167  -4.50 #> 4 hub-ensemble inc death quantile           0.0264  -4.25 #> 5 hub-ensemble inc death quantile           0.0397  -4.00 #> 6 hub-ensemble inc death quantile           0.0567  -3.75 all.equal(lp_from_component_qs$value, lp_qs, tolerance = 1e-3,           check.attributes=FALSE) #> [1] TRUE"},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/simple_ensemble.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute ensemble model outputs by summarizing component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, median, quantile, cdf, and pmf. — simple_ensemble","title":"Compute ensemble model outputs by summarizing component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, median, quantile, cdf, and pmf. — simple_ensemble","text":"Compute ensemble model outputs summarizing component model outputs combination model task, output type, output type id. Supported output types include mean, median, quantile, cdf, pmf.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/simple_ensemble.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute ensemble model outputs by summarizing component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, median, quantile, cdf, and pmf. — simple_ensemble","text":"","code":"simple_ensemble(   model_outputs,   weights = NULL,   weights_col_name = \"weight\",   agg_fun = \"mean\",   agg_args = list(),   model_id = \"hub-ensemble\",   task_id_cols = NULL )"},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/simple_ensemble.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute ensemble model outputs by summarizing component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, median, quantile, cdf, and pmf. — simple_ensemble","text":"model_outputs object class model_out_tbl component model outputs (e.g., predictions). weights optional data.frame component model weights. provided, column named model_id column containing model weights. Optionally, may contain additional columns corresponding task id variables, output_type, output_type_id, weights specific values variables. default NULL, case equally-weighted ensemble calculated. weights_col_name character string naming column weights model weights. Defaults \"weight\" agg_fun function character string name function use aggregating component model outputs ensemble outputs. See details information. agg_args named list additional arguments passed agg_fun. model_id character string identifier use ensemble model. task_id_cols character vector names columns model_outputs specify modeling tasks. Defaults NULL, case columns model_outputs \"model_id\", specified output_type_col output_type_id_col, \"value\" used task ids.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/simple_ensemble.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute ensemble model outputs by summarizing component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, median, quantile, cdf, and pmf. — simple_ensemble","text":"model_out_tbl object ensemble predictions. Note additional columns input model_outputs dropped.","code":""},{"path":"https://infectious-disease-modeling-hubs.github.io/hubEnsembles/reference/simple_ensemble.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute ensemble model outputs by summarizing component model outputs for\neach combination of model task, output type, and output type id. Supported\noutput types include mean, median, quantile, cdf, and pmf. — simple_ensemble","text":"default agg_fun \"mean\", case ensemble's output average component model outputs within group defined combination values task id columns, output type, output type id. provided agg_fun argument x vector numeric values summarize, weighted methods, argument w numeric vector weights. desired use aggregation function accept arguments, wrapper need written. weighted methods, agg_fun = \"mean\" agg_fun = \"median\" translated use matrixStats::weightedMean matrixStats::weightedMedian respectively.","code":""}]
